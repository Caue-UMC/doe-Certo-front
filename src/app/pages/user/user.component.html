<div class="user-container">
  <h2>Editar dados da conta</h2>

  <form [formGroup]="form">

    <!-- Imagem de Perfil -->
    <div class="imagem-container">
      <img *ngIf="imagemBase64" [src]="'data:image/jpeg;base64,' + imagemBase64" alt="Imagem de Perfil" class="imagem-perfil" />
    </div>

    <!-- Upload de nova imagem e remover -->
    <div class="upload-container">
      <input type="file" accept="image/*" (change)="selecionarImagem($event)" />

      <div class="btn-group" style="margin-top: 10px; gap: 10px;">
        <button type="button" class="btn salvar" (click)="enviarImagem()">Enviar Imagem</button>
        <button *ngIf="imagemBase64" type="button" class="btn excluir" (click)="removerImagem()">Remover Imagem</button>
      </div>
    </div>

    <label for="nomeInstituicao">Nome da Instituição</label>
    <input id="nomeInstituicao" type="text" formControlName="nomeInstituicao" class="form-input" />

    <label for="telefone">Telefone</label>
    <input id="telefone" type="text" formControlName="telefone" class="form-input" />

    <label for="endereco">Endereço</label>
    <input id="endereco" type="text" formControlName="endereco" class="form-input" />

    <label for="categoria">Categoria</label>
    <select id="categoria" formControlName="categoria" class="form-input">
      <option *ngFor="let categoria of categorias" [value]="categoria">{{ categoria }}</option>
    </select>

    <div class="btn-group" style="gap: 10px;">
      <button type="button" class="btn salvar" (click)="abrirModalSenha('editar')">Salvar alterações</button>
      <button type="button" class="btn excluir" (click)="abrirModalSenha('excluir')">Excluir conta</button>
      <button type="button" class="btn alterar-senha" (click)="irParaAlterarSenha()">Alterar Senha</button>
    </div>
  </form>

  <!-- Modal de senha -->
  <div class="modal-backdrop" *ngIf="mostrarModalSenha">
    <div class="modal-content">
      <h2>Confirmação de Senha</h2>
      <p>Digite sua senha para continuar.</p>

      <input
        type="password"
        [(ngModel)]="senhaConfirmacao"
        placeholder="Senha"
        class="form-control"
      />

      <div class="modal-buttons" style="gap: 10px;">
        <button class="btn btn-secondary" (click)="cancelarModal()">Cancelar</button>
        <button class="btn btn-danger" (click)="confirmarSenha()">Confirmar</button>
      </div>
    </div>
  </div>
</div>
